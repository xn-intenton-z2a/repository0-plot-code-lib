<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>agentic-lib</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; background-color: #f9f9f9; color: #333; }
    header { padding-bottom: 1em; border-bottom: 2px solid #ccc; margin-bottom: 1em; }
    h1 { font-size: 2em; }
    section { margin-bottom: 1.5em; }
    ul { list-style: none; padding: 0; }
    li { margin: 0.5em 0; }
    .label { font-weight: bold; }
    footer { margin-top: 2em; font-size: 0.9em; color: #777; }
    a { color: #0366d6; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <header>
    <h1>agentic-lib</h1>
    <p><a href="https://github.com/xn-intenton-z2a/agentic-lib">repository</a> - <a href="https://xn-intenton-z2a.github.io/agentic-lib/latest.html">latest stats</a> - <a href="https://xn-intenton-z2a.github.io/agentic-lib/all.html">all stats</a></p>
  </header>
  <section>
    <h1 class="md-github"><a class="md-github__anchor" name="express_performance" href="#express_performance"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>EXPRESS_PERFORMANCE</h1>
<h2 class="md-github"><a class="md-github__anchor" name="crawl-summary" href="#crawl-summary"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Crawl Summary</h2>
<p class="md-github">Express production guidelines include code improvements such as using gzip compression middleware (or handling at reverse proxy level), avoiding synchronous functions by using asynchronous alternatives and flags like --trace-sync-io, structured logging with debug or Pino, and robust error handling using try-catch and promise rejection propagation. Environment setup recommendations cover NODE_ENV production settings, automatic restart via systemd or process managers like PM2, clustering for scalability, caching strategies, load balancing, and reverse proxy configurations.</p>
<h2 class="md-github"><a class="md-github__anchor" name="normalised-extract" href="#normalised-extract"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Normalised Extract</h2>
<p class="md-github">Table of Contents:</p>
<ol class="md-github">
<li class="md-github">
<p class="md-github">Code Best Practices
a. Gzip Compression: Use compression middleware (app.use(compression())) and consider reverse proxy settings in Nginx.
b. Avoid Synchronous Functions: Always choose asynchronous APIs; use --trace-sync-io for detection.
c. Logging: Use debug module for debugging and Pino for production logging.
d. Exception Handling: Implement try-catch for synchronous operations and use async/await with error propagation via next(err) for asynchronous code.</p>
</li>
<li class="md-github">
<p class="md-github">Environment Configuration
a. NODE_ENV Production: Set NODE_ENV to production to enable caching and reduce error verbosity; use systemd unit file &quot;Environment=NODE_ENV=production&quot;.
b. Auto Restart: Use process managers/PM2 or systemd to automatically restart the app on crashes with appropriate commands.</p>
</li>
<li class="md-github">
<p class="md-github">Scalability and Performance
a. Clustering: Use Node’s cluster module or PM2's cluster mode (e.g., pm2 start npm --name my-app -i max -- start) to run multiple instances.
b. Caching: Implement caching via Varnish or Nginx to store request responses.
c. Load Balancing &amp; Reverse Proxy: Use load balancers (e.g., Nginx/HAProxy) for distributing incoming traffic and offloading tasks from Express.</p>
</li>
</ol>
<p class="md-github">Each section provides concrete code examples and configuration snippets that developers can directly incorporate into production-level Express applications.</p>
<h2 class="md-github"><a class="md-github__anchor" name="supplementary-details" href="#supplementary-details"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Supplementary Details</h2>
<p class="md-github">Gzip Compression Implementation:</p>
<ul class="md-github">
<li class="md-github">Code: const compression = require('compression'); app.use(compression());</li>
<li class="md-github">Reverse proxy alternative using Nginx (refer to ngx_http_gzip_module documentation).</li>
</ul>
<p class="md-github">NODE_ENV Configuration:</p>
<ul class="md-github">
<li class="md-github">Set environment variable in systemd unit file: Environment=NODE_ENV=production</li>
<li class="md-github">Benefits: caches view templates, CSS files, and reduces verbose error messages. Improves performance by up to 3x.</li>
</ul>
<p class="md-github">Automatic Restart and Cluster Setup:</p>
<ul class="md-github">
<li class="md-github">Process Manager Example (PM2):
Command: pm2 start npm --name my-app -i max -- start
Scaling Commands: pm2 scale my-app +3 or pm2 scale my-app 2</li>
<li class="md-github">Systemd Unit File Example provided with ExecStart and Restart=always.</li>
</ul>
<p class="md-github">Error Handling Patterns:</p>
<ul class="md-github">
<li class="md-github">Synchronous Code: Use try-catch around JSON.parse operations.</li>
<li class="md-github">Asynchronous Code: Use async/await with proper error forwarding via next(err).</li>
</ul>
<p class="md-github">Logging Best Practices:</p>
<ul class="md-github">
<li class="md-github">Use logging libraries like Pino for asynchronous logging to file or external systems.</li>
</ul>
<p class="md-github">Avoiding Synchronous Pitfalls:</p>
<ul class="md-github">
<li class="md-github">Avoid synchronous methods on modules and use asynchronous alternatives to maintain high throughput in production.</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="reference-details" href="#reference-details"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reference Details</h2>
<p class="md-github">API Specifications and Code Examples:</p>
<ol class="md-github">
<li class="md-github">
<p class="md-github">Compression Middleware</p>
<ul class="md-github">
<li class="md-github">Method: app.use(compression())</li>
<li class="md-github">Parameter: No parameters; middleware compresses HTTP response bodies.</li>
<li class="md-github">Return: Middleware function to process requests.</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">Error Handling in Routes</p>
<ul class="md-github">
<li class="md-github">
<p class="md-github">Synchronous Example:
Route: app.get('/search', handler)
Handler Code:
setImmediate(() =&gt; {
const jsonStr = req.query.params
try {
const jsonObj = JSON.parse(jsonStr)
res.send('Success')
} catch (e) {
res.status(400).send('Invalid JSON string')
}
})</p>
<ul class="md-github">
<li class="md-github">Pattern: Use try-catch for synchronous exceptions.</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">Asynchronous Example:
Route: app.get('/', async (req, res, next) =&gt; {
const data = await userData()  // userData returns a Promise
res.send(data)
})
Error Middleware:
app.use((err, req, res, next) =&gt; {
res.status(err.status ?? 500).send({ error: err.message })
})</p>
</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">PM2 Cluster Mode Commands</p>
<ul class="md-github">
<li class="md-github">Start Cluster Mode:
pm2 start npm --name my-app -i max -- start</li>
<li class="md-github">Scale Up:
pm2 scale my-app +3</li>
<li class="md-github">Scale to specific count:
pm2 scale my-app 2</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">Systemd Unit File Specification</p>
<ul class="md-github">
<li class="md-github">
<p class="md-github">File: /etc/systemd/system/myservice.service</p>
</li>
<li class="md-github">
<p class="md-github">Contents:
[Unit]
Description=<Awesome Express App></p>
<pre class="md-github"><code class="md-github">[Service]
Type=simple
ExecStart=/usr/local/bin/node /projects/myapp/index.js
WorkingDirectory=/projects/myapp
User=nobody
Group=nogroup
Environment=NODE_ENV=production
LimitNOFILE=infinity
LimitCORE=infinity
StandardInput=null
StandardOutput=syslog
StandardError=syslog
Restart=always

[Install]
WantedBy=multi-user.target
</code></pre>
</li>
<li class="md-github">
<p class="md-github">Effect: Ensures app auto-restarts and runs under production settings.</p>
</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">Logging Library Example</p>
<ul class="md-github">
<li class="md-github">For debugging: Install debug (npm install debug) and use as follows:
const debug = require('debug')('app:startup')
debug('Debugging message');</li>
<li class="md-github">For production: Use Pino (npm install pino) to initialize asynchronous logging.</li>
</ul>
</li>
</ol>
<p class="md-github">Troubleshooting Procedures:</p>
<ul class="md-github">
<li class="md-github">Use --trace-sync-io flag to detect synchronous I/O operations:
node --trace-sync-io app.js</li>
<li class="md-github">If using PM2, check logs with:
pm2 logs my-app</li>
<li class="md-github">For systemd managed services, view status with:
systemctl status myservice.service
journalctl -u myservice.service</li>
</ul>
<ol start="6" class="md-github">
<li class="md-github">SDK Method Signatures (Express API):
<ul class="md-github">
<li class="md-github">app.METHOD(path, callback):
METHOD: get, post, put, delete etc.
path: string route
callback: function(req: Request, res: Response, next?: Function) =&gt; void</li>
<li class="md-github">Error Handling Middleware Signature:
function(err: any, req: Request, res: Response, next: Function): void</li>
</ul>
</li>
</ol>
<p class="md-github">All above code examples and configurations are exact and complete for implementation without further reference.</p>
<h2 class="md-github"><a class="md-github__anchor" name="information-dense-extract" href="#information-dense-extract"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Information Dense Extract</h2>
<p class="md-github">Express Production Best Practices: Use compression middleware (app.use(compression())) or reverse proxy (Nginx with ngx_http_gzip_module); avoid synchronous functions, use async APIs with --trace-sync-io for detection; logging with debug/Pino; error handling via try-catch for sync and async/await with next(err) for async; set NODE_ENV=production (systemd: Environment=NODE_ENV=production) for caching and performance boost; auto restart via process managers or systemd (unit file sample provided); clustering using Node cluster module or PM2 (commands: pm2 start npm --name my-app -i max -- start, pm2 scale my-app +3); caching with Varnish/Nginx; load balancing and reverse proxy for distribution; API signatures: app.METHOD(path, callback) and error middleware function(err, req, res, next); complete systemd unit file and troubleshooting commands (pm2 logs, systemctl status, journalctl).</p>
<h2 class="md-github"><a class="md-github__anchor" name="sanitised-extract" href="#sanitised-extract"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sanitised Extract</h2>
<p class="md-github">Table of Contents:</p>
<ol class="md-github">
<li class="md-github">
<p class="md-github">Code Best Practices
a. Gzip Compression: Use compression middleware (app.use(compression())) and consider reverse proxy settings in Nginx.
b. Avoid Synchronous Functions: Always choose asynchronous APIs; use --trace-sync-io for detection.
c. Logging: Use debug module for debugging and Pino for production logging.
d. Exception Handling: Implement try-catch for synchronous operations and use async/await with error propagation via next(err) for asynchronous code.</p>
</li>
<li class="md-github">
<p class="md-github">Environment Configuration
a. NODE_ENV Production: Set NODE_ENV to production to enable caching and reduce error verbosity; use systemd unit file 'Environment=NODE_ENV=production'.
b. Auto Restart: Use process managers/PM2 or systemd to automatically restart the app on crashes with appropriate commands.</p>
</li>
<li class="md-github">
<p class="md-github">Scalability and Performance
a. Clustering: Use Nodes cluster module or PM2's cluster mode (e.g., pm2 start npm --name my-app -i max -- start) to run multiple instances.
b. Caching: Implement caching via Varnish or Nginx to store request responses.
c. Load Balancing &amp; Reverse Proxy: Use load balancers (e.g., Nginx/HAProxy) for distributing incoming traffic and offloading tasks from Express.</p>
</li>
</ol>
<p class="md-github">Each section provides concrete code examples and configuration snippets that developers can directly incorporate into production-level Express applications.</p>
<h2 class="md-github"><a class="md-github__anchor" name="original-source" href="#original-source"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Original Source</h2>
<p class="md-github">Express.js Best Practices for Production
https://expressjs.com/en/advanced/best-practice-performance.html</p>
<h2 class="md-github"><a class="md-github__anchor" name="digest-of-express_performance" href="#digest-of-express_performance"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Digest of EXPRESS_PERFORMANCE</h2>
<h1 class="md-github"><a class="md-github__anchor" name="express-performance-and-production-best-practices" href="#express-performance-and-production-best-practices"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Express Performance and Production Best Practices</h1>
<p class="md-github">Retrieved Date: 2023-10-24</p>
<h2 class="md-github"><a class="md-github__anchor" name="code-best-practices" href="#code-best-practices"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Code Best Practices</h2>
<h3 class="md-github"><a class="md-github__anchor" name="use-gzip-compression" href="#use-gzip-compression"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use Gzip Compression</h3>
<ul class="md-github">
<li class="md-github">
<p class="md-github">Install compression middleware: require('compression')</p>
</li>
<li class="md-github">
<p class="md-github">Middleware usage:
const compression = require('compression')
const express = require('express')
const app = express()</p>
<p class="md-github">app.use(compression())</p>
</li>
</ul>
<p class="md-github">Notes:</p>
<ul class="md-github">
<li class="md-github">For high-traffic systems, enable compression at the reverse proxy (e.g., Nginx via ngx_http_gzip_module) to reduce overhead.</li>
</ul>
<h3 class="md-github"><a class="md-github__anchor" name="avoid-synchronous-functions" href="#avoid-synchronous-functions"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Avoid Synchronous Functions</h3>
<ul class="md-github">
<li class="md-github">Always use asynchronous versions of Node functions to prevent blocking the event loop.</li>
<li class="md-github">Use the command-line flag <code class="md-github">--trace-sync-io</code> during testing/development to detect inadvertent synchronous calls.</li>
</ul>
<h3 class="md-github"><a class="md-github__anchor" name="correct-logging-techniques" href="#correct-logging-techniques"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Correct Logging Techniques</h3>
<ul class="md-github">
<li class="md-github">For debugging: use a specialized module (e.g., debug) instead of console.log.</li>
<li class="md-github">For production logging: use asynchronous logging libraries like Pino to log API calls and application events.</li>
</ul>
<h3 class="md-github"><a class="md-github__anchor" name="exception-handling" href="#exception-handling"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exception Handling</h3>
<ul class="md-github">
<li class="md-github">
<p class="md-github">Employ try-catch for synchronous code such as JSON parsing:
app.get('/search', (req, res) =&gt; {
setImmediate(() =&gt; {
const jsonStr = req.query.params
try {
const jsonObj = JSON.parse(jsonStr)
res.send('Success')
} catch (e) {
res.status(400).send('Invalid JSON string')
}
})
})</p>
</li>
<li class="md-github">
<p class="md-github">For asynchronous operations, use promises or async/await with error propagation via next(err):
app.get('/', async (req, res, next) =&gt; {
const data = await userData()
res.send(data)
})</p>
</li>
<li class="md-github">
<p class="md-github">Central error handling middleware example:
app.use((err, req, res, next) =&gt; {
res.status(err.status ?? 500).send({ error: err.message })
})</p>
</li>
</ul>
<h3 class="md-github"><a class="md-github__anchor" name="what-not-to-do" href="#what-not-to-do"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What Not To Do</h3>
<ul class="md-github">
<li class="md-github">Do not attach listeners to the uncaughtException event or use domains, as these practices can lead to unstable state.</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="environment-and-ops-best-practices" href="#environment-and-ops-best-practices"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Environment and Ops Best Practices</h2>
<h3 class="md-github"><a class="md-github__anchor" name="setting-node_env-to-production" href="#setting-node_env-to-production"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setting NODE_ENV to &quot;production&quot;</h3>
<ul class="md-github">
<li class="md-github">
<p class="md-github">Set environment variable NODE_ENV=production to enable:</p>
<ul class="md-github">
<li class="md-github">View templates caching</li>
<li class="md-github">CSS file caching</li>
<li class="md-github">Reduced error verbosity</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">Example using systemd:
In /etc/systemd/system/myservice.service:</p>
<p class="md-github">[Service]
Environment=NODE_ENV=production</p>
</li>
</ul>
<h3 class="md-github"><a class="md-github__anchor" name="ensure-automatic-restart" href="#ensure-automatic-restart"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ensure Automatic Restart</h3>
<ul class="md-github">
<li class="md-github">
<p class="md-github">Use process managers (e.g., PM2) or init systems (systemd) to restart the app when it crashes.</p>
</li>
<li class="md-github">
<p class="md-github">Example systemd unit file:</p>
<p class="md-github">[Unit]
Description=<Awesome Express App></p>
<p class="md-github">[Service]
Type=simple
ExecStart=/usr/local/bin/node /projects/myapp/index.js
WorkingDirectory=/projects/myapp
User=nobody
Group=nogroup
Environment=NODE_ENV=production
LimitNOFILE=infinity
LimitCORE=infinity
StandardInput=null
StandardOutput=syslog
StandardError=syslog
Restart=always</p>
<p class="md-github">[Install]
WantedBy=multi-user.target</p>
</li>
</ul>
<h3 class="md-github"><a class="md-github__anchor" name="running-in-a-cluster" href="#running-in-a-cluster"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running in a Cluster</h3>
<h4 class="md-github"><a class="md-github__anchor" name="using-nodes-cluster-module" href="#using-nodes-cluster-module"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using Node’s cluster module:</h4>
<ul class="md-github">
<li class="md-github">Fork worker processes for each CPU core. Restart workers on crash with cluster.fork().</li>
</ul>
<h4 class="md-github"><a class="md-github__anchor" name="using-pm2" href="#using-pm2"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using PM2:</h4>
<ul class="md-github">
<li class="md-github">Start in cluster mode:
$ pm2 start npm --name my-app -i max -- start</li>
<li class="md-github">Scale dynamically:
$ pm2 scale my-app +3
$ pm2 scale my-app 2</li>
</ul>
<h3 class="md-github"><a class="md-github__anchor" name="cache-request-results" href="#cache-request-results"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cache Request Results</h3>
<ul class="md-github">
<li class="md-github">Utilize caching solutions like Varnish or Nginx caching to store common responses.</li>
</ul>
<h3 class="md-github"><a class="md-github__anchor" name="using-a-load-balancer-and-reverse-proxy" href="#using-a-load-balancer-and-reverse-proxy"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using a Load Balancer and Reverse Proxy</h3>
<ul class="md-github">
<li class="md-github">Set up a load balancer (e.g., using Nginx or HAProxy) to distribute load across multiple app instances.</li>
<li class="md-github">Use a reverse proxy to handle compression, error pages, caching and serve static content, thereby offloading from Express.</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="additional-implementation-details" href="#additional-implementation-details"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Additional Implementation Details</h2>
<h3 class="md-github"><a class="md-github__anchor" name="express-application-starter-code-example" href="#express-application-starter-code-example"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Express Application Starter Code Example</h3>
<pre class="md-github"><code class="md-github">const express = require('express')
const app = express()
const port = 3000

app.get('/', (req, res) =&gt; {
  res.send('Hello World!')
})

app.listen(port, () =&gt; {
  console.log(`Example app listening on port ${port}`)
})
</code></pre>
<p class="md-github">This code is the base for an Express app running in production settings after applying the above best practices.</p>
<h2 class="md-github"><a class="md-github__anchor" name="attribution" href="#attribution"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Attribution</h2>
<ul class="md-github">
<li class="md-github">Source: Express.js Best Practices for Production (https://expressjs.com/en/advanced/best-practice-performance.html)</li>
<li class="md-github">Data Size: 2242690 bytes</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="attribution-1" href="#attribution-1"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Attribution</h2>
<ul class="md-github">
<li class="md-github">Source: Express.js Best Practices for Production</li>
<li class="md-github">URL: https://expressjs.com/en/advanced/best-practice-performance.html</li>
<li class="md-github">License: MIT License</li>
<li class="md-github">Crawl Date: 2025-04-29T18:52:02.683Z</li>
<li class="md-github">Data Size: 2242690 bytes</li>
<li class="md-github">Links Found: 8252</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="retrieved" href="#retrieved"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Retrieved</h2>
<p class="md-github">2025-04-29</p>

  </section>
  <footer>
    <p>Generated on 2025-04-30T03:29:52.418Z</p>
  </footer>
</body>
</html>