# RFC7807

## Crawl Summary
RFC7807 implementation details derived from crawl at https://restfulapi.net/problem-details/ include the specification for a standardized error response JSON structure (type, title, status, detail, instance).

## Normalised Extract
Table of Contents:
1. RFC7807 Object Structure
   - type: string (error identifier, default 'about:blank')
   - title: string (error summary)
   - status: number (HTTP status code)
   - detail: string (description of the error)
   - instance: string (specific occurrence URI)
2. Express Middleware Error Handler
   - Signature: function errorHandler(err, req, res, next)
   - Usage: app.use(errorHandler)
   - Implementation: sets res.status(err.status || 500) and returns JSON with required fields
3. API Method Specifications
   - Method: createProblemDetails(err, req, res) returning Response
   - Parameter types: err (Error object with optional properties), req (Request), res (Response)
4. Configuration Options
   - err.type: optional, default 'about:blank'
   - err.status: optional, default 500
   - err.detail: optional custom error description
5. Troubleshooting Steps
   - Verify middleware order in Express
   - Check error object completeness
   - Use logging for debugging error flow

## Supplementary Details
Technical Specifications:
- RFC7807 Error JSON must include:
  type: string (custom URI identifier, e.g., 'about:blank' or custom URI)
  title: string (short description, invariant across errors)
  status: number (HTTP status code, e.g., 400, 404, 500)
  detail: string (detailed error message)
  instance: string (request URL)
- Implementation Steps:
  1. Capture errors in Express routes using try-catch blocks.
  2. Create error objects enriched with status, type, and detail properties.
  3. Implement an error-handling middleware that constructs the Problem Details response.
  4. Configure the middleware to be used after all route handlers.
- Configuration Values:
  err.type default: 'about:blank'
  err.status default: 500
  Expected Effects: Consistent error responses that adhere to RFC7807.

## Reference Details
API Specifications:
Method Signature:
function createProblemDetails(err: Error & { status?: number, type?: string, detail?: string }, req: Request, res: Response): Response
Returns: Express Response object with JSON formatted as:
{
  type: string,  // defaults to 'about:blank'
  title: string, // error message
  status: number, // HTTP status code
  detail: string, // detailed error explanation
  instance: string // request URI
}

Express Middleware Example:
// Error handling middleware for RFC7807
function errorHandler(err, req, res, next) {
  const statusCode = err.status || 500;
  res.status(statusCode).json({
    type: err.type || 'about:blank',
    title: err.message,
    status: statusCode,
    detail: err.detail || 'Unexpected error occurred',
    instance: req.originalUrl
  });
}

Usage:
// Place error handler after all other middlewares
app.use(errorHandler);

Configuration Options:
- err.type: accepts a string URI. If not provided, defaults to 'about:blank'.
- err.status: accepts a number. If not provided, defaults to 500.
- err.detail: accepts a string explanation. Use detailed description based on the context.

Best Practices:
- Always return a Problem Details JSON on errors to ensure consistency.
- Log error details server-side including instance URIs for tracing.
- Position error middleware as final middleware in Express.

Troubleshooting Procedures:
- Command: node app.js
  Expected Output: Server starts without uncaught exceptions; errors produce RFC7807 JSON responses.
- Verify that error objects have the necessary structure by manually testing endpoints with errors.
- Use debugging logs to trace missing properties or misconfigured middleware order.

## Information Dense Extract
RFC7807 JSON: { type: string ('about:blank' default), title: string, status: number (HTTP code, default 500), detail: string, instance: string } | Express Middleware: function errorHandler(err,req,res,next) { res.status(err.status || 500).json({ type: err.type || 'about:blank', title: err.message, status: err.status || 500, detail: err.detail || 'Unexpected error occurred', instance: req.originalUrl }); } | API: createProblemDetails(err, req, res): Response | Configuration: err.type defaults 'about:blank', err.status defaults 500, err.detail optional | Best Practices: middleware last; consistent error format; logging included | Troubleshooting: verify middleware order; check error structure; debug with console logs

## Sanitised Extract
Table of Contents:
1. RFC7807 Object Structure
   - type: string (error identifier, default 'about:blank')
   - title: string (error summary)
   - status: number (HTTP status code)
   - detail: string (description of the error)
   - instance: string (specific occurrence URI)
2. Express Middleware Error Handler
   - Signature: function errorHandler(err, req, res, next)
   - Usage: app.use(errorHandler)
   - Implementation: sets res.status(err.status || 500) and returns JSON with required fields
3. API Method Specifications
   - Method: createProblemDetails(err, req, res) returning Response
   - Parameter types: err (Error object with optional properties), req (Request), res (Response)
4. Configuration Options
   - err.type: optional, default 'about:blank'
   - err.status: optional, default 500
   - err.detail: optional custom error description
5. Troubleshooting Steps
   - Verify middleware order in Express
   - Check error object completeness
   - Use logging for debugging error flow

## Original Source
Implementing RFC7807 in REST APIs
https://restfulapi.net/problem-details/

## Digest of RFC7807

# Problem Details for HTTP APIs
Retrieved Date: 2023-10-05

This document provides exact technical details for implementing RFC7807 in REST APIs. It outlines the RFC7807 JSON object structure, detailed Express middleware error handling implementation, API method signatures, configuration options, and troubleshooting procedures.

## RFC7807 JSON Object Structure
The RFC7807 specification defines an error response object with the following fields:

- type (string): A URI identifier that categorizes the error type. Example: "about:blank" or a custom URI.
- title (string): A short, human-readable summary of the error that should not change from occurrence to occurrence.
- status (number): The HTTP status code generated by the origin server for this occurrence of the problem.
- detail (string): A human-readable explanation specific to this occurrence of the problem.
- instance (string): A URI reference that identifies the specific occurrence of the problem.

## Express Middleware Implementation
Below is an implementation pattern for using RFC7807 in an Express API:

function errorHandler(err, req, res, next) {
  const statusCode = err.status || 500;
  res.status(statusCode).json({
    type: err.type || "about:blank",
    title: err.message,
    status: statusCode,
    detail: err.detail || "Unexpected error occurred",
    instance: req.originalUrl
  });
}

Usage:
app.use(errorHandler);

## API Specifications
For error response creation, the method signature in a Node.js Express environment is as follows:

function createProblemDetails(err: Error & { status?: number, type?: string, detail?: string }, req: Request, res: Response): Response

Parameters:
- err: The error object which may include additional properties such as status, type, and detail.
- req: The Express request object.
- res: The Express response object.

Returns:
- An Express response with a JSON object conforming to RFC7807.

## Customization and Configuration Options
Developers can configure custom error types by setting the following options:

- err.type: A string indicating a custom error URI. Defaults to "about:blank" if not provided.
- err.status: A numeric HTTP status code. Defaults to 500 if not provided.
- err.detail: A string providing a detailed explanation.

These configurations allow fine-tuned control over error reporting and consistency in API responses.

## Troubleshooting Procedures
1. Ensure that the error-handling middleware is the last middleware used in Express.
2. Verify that the error object includes all necessary properties: status, type, title, detail, and instance.
3. Use console logs in the middleware for debugging error flows and unexpected responses.

Attribution: Data extracted from crawling URL https://restfulapi.net/problem-details/ with data size 0 bytes. Source entry index provided in SOURCES.md: Entry 24.

## Attribution
- Source: Implementing RFC7807 in REST APIs
- URL: https://restfulapi.net/problem-details/
- License: CC BY-NC 4.0
- Crawl Date: 2025-04-27T10:49:31.795Z
- Data Size: 0 bytes
- Links Found: 0

## Retrieved
2025-04-27
