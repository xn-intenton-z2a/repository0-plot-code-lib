<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>agentic-lib</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; background-color: #f9f9f9; color: #333; }
    header { padding-bottom: 1em; border-bottom: 2px solid #ccc; margin-bottom: 1em; }
    h1 { font-size: 2em; }
    section { margin-bottom: 1.5em; }
    ul { list-style: none; padding: 0; }
    li { margin: 0.5em 0; }
    .label { font-weight: bold; }
    footer { margin-top: 2em; font-size: 0.9em; color: #777; }
    a { color: #0366d6; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <header>
    <h1>agentic-lib</h1>
    <p><a href="https://github.com/xn-intenton-z2a/agentic-lib">repository</a> - <a href="https://xn-intenton-z2a.github.io/agentic-lib/latest.html">latest stats</a> - <a href="https://xn-intenton-z2a.github.io/agentic-lib/all.html">all stats</a></p>
  </header>
  <section>
    <h1 class="md-github"><a class="md-github__anchor" name="vitest" href="#vitest"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>VITEST</h1>
<h2 class="md-github"><a class="md-github__anchor" name="crawl-summary" href="#crawl-summary"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Crawl Summary</h2>
<p class="md-github">Vitest is a Vite-native testing framework with ESM, TypeScript, and JSX support. It allows installation via npm, yarn, pnpm, or bun, and supports direct CLI invocation via npx. It enforces file naming conventions (.test. or .spec.) and offers unified configuration with Vite through vitest.config or test property in vite.config. Advanced options include workspaces, dependency optimization (server.deps and deps.optimizer options), custom reporter configuration, and choice of execution pools (threads, forks, vmThreads, vmForks). Detailed CLI options, environment settings (node, jsdom, happy-dom, edge-runtime), and troubleshooting recommendations are provided.</p>
<h2 class="md-github"><a class="md-github__anchor" name="normalised-extract" href="#normalised-extract"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Normalised Extract</h2>
<p class="md-github">Table of Contents:</p>
<ol class="md-github">
<li class="md-github">
<p class="md-github">Introduction</p>
</li>
<li class="md-github">
<p class="md-github">Installation</p>
</li>
<li class="md-github">
<p class="md-github">Writing Tests</p>
</li>
<li class="md-github">
<p class="md-github">Configuration</p>
</li>
<li class="md-github">
<p class="md-github">CLI Usage</p>
</li>
<li class="md-github">
<p class="md-github">Workspaces</p>
</li>
<li class="md-github">
<p class="md-github">Dependency and Asset Optimization</p>
</li>
<li class="md-github">
<p class="md-github">Debugging and Best Practices</p>
</li>
<li class="md-github">
<p class="md-github">Introduction:</p>
</li>
</ol>
<ul class="md-github">
<li class="md-github">Vitest provides fast testing via Vite's transformation pipeline with out-of-box ESM, TypeScript, and JSX support.</li>
</ul>
<ol start="2" class="md-github">
<li class="md-github">Installation:</li>
</ol>
<ul class="md-github">
<li class="md-github">npm: npm install -D vitest</li>
<li class="md-github">yarn: yarn add -D vitest</li>
<li class="md-github">pnpm: pnpm add -D vitest</li>
<li class="md-github">bun: bun add -D vitest</li>
<li class="md-github">npx vitest can be used if local binary not found.</li>
</ul>
<ol start="3" class="md-github">
<li class="md-github">Writing Tests:</li>
</ol>
<ul class="md-github">
<li class="md-github">Test file names must include .test. or .spec.</li>
<li class="md-github">Example implementation:
File: sum.js
export function sum(a, b) {
return a + b
}
File: sum.test.js
import { expect, test } from 'vitest'
import { sum } from './sum.js'
test('adds 1 + 2 to equal 3', () =&gt; {
expect(sum(1, 2)).toBe(3)
})</li>
<li class="md-github">Add script to package.json:
&quot;scripts&quot;: { &quot;test&quot;: &quot;vitest&quot; }</li>
</ul>
<ol start="4" class="md-github">
<li class="md-github">Configuration:</li>
</ol>
<ul class="md-github">
<li class="md-github">Create vitest.config.ts with:
import { defineConfig } from 'vitest/config'
export default defineConfig({
test: { /* options */ }
})</li>
<li class="md-github">Can also configure via vite.config.ts with test property and triple slash reference.</li>
<li class="md-github">Key parameters include include, exclude (default: ['**/*.{test,spec}.?(c|m)[jt]s?(x)']), globals (default false), environment (default 'node'), root, reporters, and pool settings.</li>
</ul>
<ol start="5" class="md-github">
<li class="md-github">CLI Usage:</li>
</ol>
<ul class="md-github">
<li class="md-github">Run tests: vitest or npm run test</li>
<li class="md-github">Run once: vitest run</li>
<li class="md-github">Enable coverage: vitest run --coverage</li>
<li class="md-github">Additional options: --port, --https, --watch, --config <path></li>
</ul>
<ol start="6" class="md-github">
<li class="md-github">Workspaces:</li>
</ol>
<ul class="md-github">
<li class="md-github">Define multiple configurations in one project using the workspace option in vitest.config.
Example:
workspace: [
'packages/<em class="md-github">',
'tests/</em>/vitest.config.{e2e,unit}.ts',
{ test: { name: 'happy-dom', root: './shared_tests', environment: 'happy-dom', setupFiles: ['./setup.happy-dom.ts'] } },
{ test: { name: 'node', root: './shared_tests', environment: 'node', setupFiles: ['./setup.node.ts'] } }
]</li>
</ul>
<ol start="7" class="md-github">
<li class="md-github">Dependency and Asset Optimization:</li>
</ol>
<ul class="md-github">
<li class="md-github">server.deps:
external: default [//node_modules//]
inline: array or true for all inline
fallbackCJS: default false
cacheDir: default 'node_modules/.vite'</li>
<li class="md-github">deps.optimizer:
include/exclude patterns, force rebundling option, and mode-specific settings (optimizer.web and optimizer.ssr).</li>
<li class="md-github">Asset options:
transformAssets: true; transformCss: true; transformGlobPattern for matching external files.</li>
</ul>
<ol start="8" class="md-github">
<li class="md-github">Debugging and Best Practices:</li>
</ol>
<ul class="md-github">
<li class="md-github">Use mergeConfig for combining Vite and Vitest configurations.
Example:
import { defineConfig, mergeConfig } from 'vitest/config'
import viteConfig from './vite.config.mjs'
export default mergeConfig(viteConfig, defineConfig({ test: { exclude: ['packages/template/*'] } }))</li>
<li class="md-github">For Bun, use bun run test instead of bun test.</li>
<li class="md-github">Set VITEST_SKIP_INSTALL_CHECKS=1 to disable dependency checks.</li>
<li class="md-github">Always include triple slash reference for Vitest types in TypeScript files.</li>
<li class="md-github">Use CLI flags such as --update for snapshots and --watch for re-running tests on changes.</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="supplementary-details" href="#supplementary-details"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Supplementary Details</h2>
<p class="md-github">Technical Specifications:</p>
<ul class="md-github">
<li class="md-github">
<p class="md-github">Installation:
npm install -D vitest
yarn add -D vitest
pnpm add -D vitest
bun add -D vitest</p>
</li>
<li class="md-github">
<p class="md-github">Test File Convention: Files must include .test. or .spec. in filename.</p>
</li>
<li class="md-github">
<p class="md-github">Package.json script configuration:
{
&quot;scripts&quot;: {
&quot;test&quot;: &quot;vitest&quot;,
&quot;coverage&quot;: &quot;vitest run --coverage&quot;
}
}</p>
</li>
<li class="md-github">
<p class="md-github">Vitest Config Options (in test property):
include: string[] (default: ['<strong class="md-github">/*.{test,spec}.?(c|m)[jt]s?(x)'])
exclude: string[] (default: ['</strong>/node_modules/<strong class="md-github">', '</strong>/dist/<strong class="md-github">', '</strong>/cypress/**', etc])
globals: boolean (default: false)
environment: string (default: 'node'; other options: 'jsdom', 'happy-dom', 'edge-runtime')
root: string (project root directory)
reporters: string | Reporter[] (default 'default')
pool: 'threads' | 'forks' | 'vmThreads' | 'vmForks' (default: 'forks')</p>
</li>
<li class="md-github">
<p class="md-github">Dependency configuration under server.deps:
external: RegExp[] (default: [//node_modules//])
inline: (string | RegExp)[] | true
fallbackCJS: boolean (default: false)
cacheDir: string (default: 'node_modules/.vite')</p>
</li>
<li class="md-github">
<p class="md-github">CLI Options:
--config: Path to configuration file
--watch, --run, --port, --https
--update for snapshot updates
--globals to enable global APIs</p>
</li>
<li class="md-github">
<p class="md-github">Merging Configurations:
Use mergeConfig from 'vitest/config' to combine Vite and Vitest settings.</p>
</li>
<li class="md-github">
<p class="md-github">Environment Setup:
Triple slash reference for TypeScript:
/// <reference types="vitest/config" /></p>
</li>
<li class="md-github">
<p class="md-github">Workspaces Setup:
Define workspaces as an array of glob patterns or configuration objects with test property.</p>
</li>
<li class="md-github">
<p class="md-github">Best Practices:
Use a single configuration file when possible to avoid conflicts.
For Bun users, invoke tests using 'bun run test'.
For debugging modules, review deps.optimizer options and cache directories.</p>
</li>
<li class="md-github">
<p class="md-github">Troubleshooting Procedures:</p>
<ol class="md-github">
<li class="md-github">Verify Node version &gt;=18.0.0</li>
<li class="md-github">For dependency issues, set VITEST_SKIP_INSTALL_CHECKS=1</li>
<li class="md-github">Run npx vitest --help to list CLI options</li>
<li class="md-github">If tests are misbehaving due to configuration conflicts, check and merge Vite and Vitest configs properly.</li>
</ol>
</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="reference-details" href="#reference-details"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reference Details</h2>
<p class="md-github">API Specifications and Implementation Details:</p>
<ol class="md-github">
<li class="md-github">
<p class="md-github">defineConfig from vitest/config:
Signature: defineConfig(options: { test?: TestOptions; [prop: string]: any }): UserConfigExport
Example:
import { defineConfig } from 'vitest/config'
export default defineConfig({
test: {
include: ['**/*.{test,spec}.{js,ts,jsx,tsx}'],
exclude: ['node_modules', 'dist'],
globals: false,
environment: 'node',
reporters: 'default',
pool: 'forks'
}
})</p>
</li>
<li class="md-github">
<p class="md-github">CLI Commands:</p>
<ul class="md-github">
<li class="md-github">Run tests: vitest</li>
<li class="md-github">Run tests once: vitest run</li>
<li class="md-github">Run with coverage: vitest run --coverage</li>
<li class="md-github">Additional flags: --config <path>, --watch, --update</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">Test File Example:
File: sum.js
export function sum(a: number, b: number): number {
return a + b
}
File: sum.test.js
import { expect, test } from 'vitest'
import { sum } from './sum.js'
test('adds 1 + 2 to equal 3', () =&gt; {
expect(sum(1, 2)).toBe(3)
})</p>
</li>
<li class="md-github">
<p class="md-github">Configuration Options (Exact Details):</p>
<ul class="md-github">
<li class="md-github">test.include: string[]; Default: ['**/*.{test,spec}.?(c|m)[jt]s?(x)']</li>
<li class="md-github">test.exclude: string[]; Default: ['<strong class="md-github">/node_modules/</strong>', '<strong class="md-github">/dist/</strong>', '<strong class="md-github">/cypress/</strong>', '<strong class="md-github">/.{idea,git,cache,output,temp}/</strong>', '**/{karma,rollup,webpack,vite,vitest,jest,ava,babel,nyc,cypress,tsup,build,eslint,prettier}.config.*']</li>
<li class="md-github">globals: boolean; Default: false</li>
<li class="md-github">environment: 'node' | 'jsdom' | 'happy-dom' | 'edge-runtime'; Default: 'node'</li>
<li class="md-github">root: string; Use CLI flag -r or --root</li>
<li class="md-github">reporters: string | Reporter[]; Default: 'default'</li>
<li class="md-github">pool: 'threads' | 'forks' | 'vmThreads' | 'vmForks'; Default: 'forks'</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">Dependency Handling (server.deps):</p>
<ul class="md-github">
<li class="md-github">external: RegExp[]; Default: [//node_modules//]</li>
<li class="md-github">inline: (string | RegExp)[] | true; Default: []</li>
<li class="md-github">fallbackCJS: boolean; Default: false</li>
<li class="md-github">cacheDir: string; Default: 'node_modules/.vite'</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">Best Practices and Troubleshooting:</p>
<ul class="md-github">
<li class="md-github">Use mergeConfig to combine vite.config and vitest.config.</li>
<li class="md-github">For missing dependencies, set environment variable VITEST_SKIP_INSTALL_CHECKS=1</li>
<li class="md-github">For debugging errors in CJS modules, enable deps.interopDefault (default true).</li>
<li class="md-github">For TypeScript, include triple-slash reference: /// <reference types="vitest/config" /></li>
<li class="md-github">When using workspaces, ensure consistency across configuration fields.</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">Troubleshooting Procedures (Commands):</p>
<ul class="md-github">
<li class="md-github">Check Node version: node -v (should be &gt;= 18.0.0)</li>
<li class="md-github">List CLI options: npx vitest --help</li>
<li class="md-github">For snapshot updates: vitest --update</li>
<li class="md-github">For isolated issues, run: vitest run --no-watch</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">Full SDK Method and Usage Patterns:
Importing and using Vitest APIs in tests:
import { expect, test, describe } from 'vitest'
test('example test', () =&gt; { /* implementation */ })</p>
</li>
</ol>
<p class="md-github">This section provides complete technical rationale for method signatures, configuration options and CLI usage for immediate integration.</p>
<h2 class="md-github"><a class="md-github__anchor" name="information-dense-extract" href="#information-dense-extract"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Information Dense Extract</h2>
<p class="md-github">Vitest; Install: npm install -D vitest, yarn add -D vitest, pnpm add -D vitest, bun add -D vitest; Use npx vitest if local binary missing; Test files must include .test. or .spec.; Example: sum.js: export function sum(a, b){ return a+b }; sum.test.js: import {expect,test} from 'vitest'; test('adds 1+2 equals 3', () =&gt; { expect(sum(1,2)).toBe(3) }); package.json script: {&quot;test&quot;:&quot;vitest&quot;}; Config: vitest.config.ts using defineConfig({ test: { include: ['<strong class="md-github">/*.{test,spec}.?(c|m)[jt]s?(x)'], exclude: ['</strong>/node_modules/**', ...], globals: false, environment: 'node', reporters: 'default', pool: 'forks' } }); CLI flags: --config, --watch, --update, --coverage; Dependency: server.deps.external default [//node_modules//], inline, fallbackCJS false, cacheDir 'node_modules/.vite'; Workspaces: array of glob patterns/config objects; Merge config using mergeConfig; Best practices: single config file preferred; triple-slash reference for TS; Troubleshooting: use VITEST_SKIP_INSTALL_CHECKS=1, npx vitest --help; API: defineConfig(options) returns config; Detailed options provided for test file matching, environment, pooling, and dependency optimization.</p>
<h2 class="md-github"><a class="md-github__anchor" name="sanitised-extract" href="#sanitised-extract"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sanitised Extract</h2>
<p class="md-github">Table of Contents:</p>
<ol class="md-github">
<li class="md-github">
<p class="md-github">Introduction</p>
</li>
<li class="md-github">
<p class="md-github">Installation</p>
</li>
<li class="md-github">
<p class="md-github">Writing Tests</p>
</li>
<li class="md-github">
<p class="md-github">Configuration</p>
</li>
<li class="md-github">
<p class="md-github">CLI Usage</p>
</li>
<li class="md-github">
<p class="md-github">Workspaces</p>
</li>
<li class="md-github">
<p class="md-github">Dependency and Asset Optimization</p>
</li>
<li class="md-github">
<p class="md-github">Debugging and Best Practices</p>
</li>
<li class="md-github">
<p class="md-github">Introduction:</p>
</li>
</ol>
<ul class="md-github">
<li class="md-github">Vitest provides fast testing via Vite's transformation pipeline with out-of-box ESM, TypeScript, and JSX support.</li>
</ul>
<ol start="2" class="md-github">
<li class="md-github">Installation:</li>
</ol>
<ul class="md-github">
<li class="md-github">npm: npm install -D vitest</li>
<li class="md-github">yarn: yarn add -D vitest</li>
<li class="md-github">pnpm: pnpm add -D vitest</li>
<li class="md-github">bun: bun add -D vitest</li>
<li class="md-github">npx vitest can be used if local binary not found.</li>
</ul>
<ol start="3" class="md-github">
<li class="md-github">Writing Tests:</li>
</ol>
<ul class="md-github">
<li class="md-github">Test file names must include .test. or .spec.</li>
<li class="md-github">Example implementation:
File: sum.js
export function sum(a, b) {
return a + b
}
File: sum.test.js
import { expect, test } from 'vitest'
import { sum } from './sum.js'
test('adds 1 + 2 to equal 3', () =&gt; {
expect(sum(1, 2)).toBe(3)
})</li>
<li class="md-github">Add script to package.json:
'scripts': { 'test': 'vitest' }</li>
</ul>
<ol start="4" class="md-github">
<li class="md-github">Configuration:</li>
</ol>
<ul class="md-github">
<li class="md-github">Create vitest.config.ts with:
import { defineConfig } from 'vitest/config'
export default defineConfig({
test: { /* options */ }
})</li>
<li class="md-github">Can also configure via vite.config.ts with test property and triple slash reference.</li>
<li class="md-github">Key parameters include include, exclude (default: ['**/*.{test,spec}.?(c|m)[jt]s?(x)']), globals (default false), environment (default 'node'), root, reporters, and pool settings.</li>
</ul>
<ol start="5" class="md-github">
<li class="md-github">CLI Usage:</li>
</ol>
<ul class="md-github">
<li class="md-github">Run tests: vitest or npm run test</li>
<li class="md-github">Run once: vitest run</li>
<li class="md-github">Enable coverage: vitest run --coverage</li>
<li class="md-github">Additional options: --port, --https, --watch, --config <path></li>
</ul>
<ol start="6" class="md-github">
<li class="md-github">Workspaces:</li>
</ol>
<ul class="md-github">
<li class="md-github">Define multiple configurations in one project using the workspace option in vitest.config.
Example:
workspace: [
'packages/<em class="md-github">',
'tests/</em>/vitest.config.{e2e,unit}.ts',
{ test: { name: 'happy-dom', root: './shared_tests', environment: 'happy-dom', setupFiles: ['./setup.happy-dom.ts'] } },
{ test: { name: 'node', root: './shared_tests', environment: 'node', setupFiles: ['./setup.node.ts'] } }
]</li>
</ul>
<ol start="7" class="md-github">
<li class="md-github">Dependency and Asset Optimization:</li>
</ol>
<ul class="md-github">
<li class="md-github">server.deps:
external: default [/'/node_modules'//]
inline: array or true for all inline
fallbackCJS: default false
cacheDir: default 'node_modules/.vite'</li>
<li class="md-github">deps.optimizer:
include/exclude patterns, force rebundling option, and mode-specific settings (optimizer.web and optimizer.ssr).</li>
<li class="md-github">Asset options:
transformAssets: true; transformCss: true; transformGlobPattern for matching external files.</li>
</ul>
<ol start="8" class="md-github">
<li class="md-github">Debugging and Best Practices:</li>
</ol>
<ul class="md-github">
<li class="md-github">Use mergeConfig for combining Vite and Vitest configurations.
Example:
import { defineConfig, mergeConfig } from 'vitest/config'
import viteConfig from './vite.config.mjs'
export default mergeConfig(viteConfig, defineConfig({ test: { exclude: ['packages/template/*'] } }))</li>
<li class="md-github">For Bun, use bun run test instead of bun test.</li>
<li class="md-github">Set VITEST_SKIP_INSTALL_CHECKS=1 to disable dependency checks.</li>
<li class="md-github">Always include triple slash reference for Vitest types in TypeScript files.</li>
<li class="md-github">Use CLI flags such as --update for snapshots and --watch for re-running tests on changes.</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="original-source" href="#original-source"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Original Source</h2>
<p class="md-github">Vitest Documentation
https://vitest.dev/</p>
<h2 class="md-github"><a class="md-github__anchor" name="digest-of-vitest" href="#digest-of-vitest"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Digest of VITEST</h2>
<h1 class="md-github"><a class="md-github__anchor" name="vitest-documentation" href="#vitest-documentation"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Vitest Documentation</h1>
<h1 class="md-github"><a class="md-github__anchor" name="table-of-contents" href="#table-of-contents"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Table of Contents</h1>
<ol class="md-github">
<li class="md-github">Introduction</li>
<li class="md-github">Installation and Setup</li>
<li class="md-github">Writing Tests</li>
<li class="md-github">Configuration</li>
<li class="md-github">CLI Usage</li>
<li class="md-github">Workspaces and Advanced Options</li>
<li class="md-github">Dependency Optimization and Transformer Options</li>
<li class="md-github">Troubleshooting and Best Practices</li>
</ol>
<h1 class="md-github"><a class="md-github__anchor" name="1-introduction" href="#1-introduction"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Introduction</h1>
<p class="md-github">Vitest is a Vite-native testing framework that supports ESM, TypeScript, and JSX out-of-the-box. It is designed for fast test execution using features like smart watch mode and integrated configuration with Vite.</p>
<h1 class="md-github"><a class="md-github__anchor" name="2-installation-and-setup" href="#2-installation-and-setup"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Installation and Setup</h1>
<ul class="md-github">
<li class="md-github">Requires Vite &gt;= v5.0.0 and Node &gt;= v18.0.0.</li>
<li class="md-github">Installation commands:
npm: npm install -D vitest
yarn: yarn add -D vitest
pnpm: pnpm add -D vitest
bun: bun add -D vitest</li>
<li class="md-github">Option to use npx: npx vitest</li>
</ul>
<h1 class="md-github"><a class="md-github__anchor" name="3-writing-tests" href="#3-writing-tests"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Writing Tests</h1>
<p class="md-github">File names must include .test. or .spec.
Example (sum.js):
export function sum(a, b) {
return a + b
}</p>
<p class="md-github">Example Test (sum.test.js):
import { expect, test } from 'vitest'
import { sum } from './sum.js'</p>
<p class="md-github">test('adds 1 + 2 to equal 3', () =&gt; {
expect(sum(1, 2)).toBe(3)
})</p>
<p class="md-github">Package.json script entry:
{
&quot;scripts&quot;: {
&quot;test&quot;: &quot;vitest&quot;
}
}</p>
<h1 class="md-github"><a class="md-github__anchor" name="4-configuration" href="#4-configuration"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. Configuration</h1>
<p class="md-github">Vitest integrates with Vite. It supports configuration via a dedicated vitest.config file OR by adding a test property in vite.config.</p>
<p class="md-github">Example vitest.config.ts:
import { defineConfig } from 'vitest/config'</p>
<p class="md-github">export default defineConfig({
test: {
// custom configuration options
}
})</p>
<p class="md-github">Alternate configuration in vite.config.ts with reference:
/// <reference types="vitest/config" />
import { defineConfig } from 'vite'</p>
<p class="md-github">export default defineConfig({
test: {
// options here
}
})</p>
<p class="md-github">Key configuration options include:</p>
<ul class="md-github">
<li class="md-github">include: Array of glob patterns for test files</li>
<li class="md-github">exclude: Array of glob patterns to ignore</li>
<li class="md-github">globals: Boolean flag (default false) to expose global test APIs</li>
<li class="md-github">environment: Environment string such as 'node', 'jsdom', 'happy-dom', 'edge-runtime'</li>
<li class="md-github">root: Project root directory</li>
<li class="md-github">reporters: Custom reporter settings with support for multiple reporters</li>
<li class="md-github">pool: Select between 'threads', 'forks', 'vmThreads', or 'vmForks'</li>
<li class="md-github">Dependency options under server.deps and deps.optimizer with options such as external, inline, and transformAssets</li>
</ul>
<h1 class="md-github"><a class="md-github__anchor" name="5-cli-usage" href="#5-cli-usage"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. CLI Usage</h1>
<p class="md-github">Vitest can be run via npm scripts or directly with npx. Common CLI commands:</p>
<ul class="md-github">
<li class="md-github">Run all tests: vitest</li>
<li class="md-github">Run tests once: vitest run</li>
<li class="md-github">With coverage: vitest run --coverage</li>
<li class="md-github">Additional CLI options: --port, --https, --watch, --config <path></li>
</ul>
<h1 class="md-github"><a class="md-github__anchor" name="6-workspaces-and-advanced-options" href="#6-workspaces-and-advanced-options"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6. Workspaces and Advanced Options</h1>
<p class="md-github">Vitest supports multiple workspace configurations within a project. Example configuration:
import { defineConfig } from 'vitest/config'</p>
<p class="md-github">export default defineConfig({
test: {
workspace: [
'packages/<em class="md-github">',
'tests/</em>/vitest.config.{e2e,unit}.ts',
{
test: {
name: 'happy-dom',
root: './shared_tests',
environment: 'happy-dom',
setupFiles: ['./setup.happy-dom.ts']
}
},
{
test: {
name: 'node',
root: './shared_tests',
environment: 'node',
setupFiles: ['./setup.node.ts']
}
}
]
}
})</p>
<h1 class="md-github"><a class="md-github__anchor" name="7-dependency-optimization-and-transformer-options" href="#7-dependency-optimization-and-transformer-options"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7. Dependency Optimization and Transformer Options</h1>
<p class="md-github">Key dependency options:</p>
<ul class="md-github">
<li class="md-github">server.deps.external: default [//node_modules//], externalizes packages for native Node processing</li>
<li class="md-github">server.deps.inline: accepts array of strings or regular expressions; if set to true, all dependencies are processed inline</li>
<li class="md-github">deps.optimizer: supports options for ssr and web modes, including include/exclude patterns and forcing rebundling</li>
<li class="md-github">Options for handling assets and CSS with transformAssets (default true) and transformCss (default true)</li>
</ul>
<h1 class="md-github"><a class="md-github__anchor" name="8-troubleshooting-and-best-practices" href="#8-troubleshooting-and-best-practices"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>8. Troubleshooting and Best Practices</h1>
<ul class="md-github">
<li class="md-github">
<p class="md-github">For Bun users, use: bun run test</p>
</li>
<li class="md-github">
<p class="md-github">To merge Vite and Vitest config, use mergeConfig from 'vitest/config':
import { defineConfig, mergeConfig } from 'vitest/config'
import viteConfig from './vite.config.mjs'</p>
<p class="md-github">export default mergeConfig(viteConfig, defineConfig({ test: { exclude: ['packages/template/*'] } }))</p>
</li>
<li class="md-github">
<p class="md-github">Use VITEST_SKIP_INSTALL_CHECKS=1 to disable automatic dependency installation prompts</p>
</li>
<li class="md-github">
<p class="md-github">When debugging transformed modules, adjust deps.optimizer options to force rebundling if necessary</p>
</li>
<li class="md-github">
<p class="md-github">Always include a reference directive for TypeScript: /// <reference types="vitest/config" /></p>
</li>
</ul>
<p class="md-github">Retrieved on: 2023-10-12
Attribution: Data Size 41188223 bytes, 26259 links found, no error.</p>
<h2 class="md-github"><a class="md-github__anchor" name="attribution" href="#attribution"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Attribution</h2>
<ul class="md-github">
<li class="md-github">Source: Vitest Documentation</li>
<li class="md-github">URL: https://vitest.dev/</li>
<li class="md-github">License: License: MIT</li>
<li class="md-github">Crawl Date: 2025-05-03T21:05:06.016Z</li>
<li class="md-github">Data Size: 41188223 bytes</li>
<li class="md-github">Links Found: 26259</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="retrieved" href="#retrieved"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Retrieved</h2>
<p class="md-github">2025-05-03</p>

  </section>
  <footer>
    <p>Generated on 2025-05-03T22:22:58.274Z</p>
  </footer>
</body>
</html>